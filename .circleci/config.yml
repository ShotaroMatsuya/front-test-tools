version: 2.1
orbs:
  cypress: cypress-io/cypress@1

jobs:
  test:
    working_directory: ~/root/cypress-api-request
    docker:
      - image: node:14
    steps:
      - checkout:
          path: ~/root
workflows:
  build:
    jobs:
      - test
      - cypress/run: # "run" job comes from "cypress" orb
          record: true # record results on Cypress Dashboard
          parallel: true # split all specs across machines
          parallelism: 4 # use 4 CircleCI machines to finish quickly
